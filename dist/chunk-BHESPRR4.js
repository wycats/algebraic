import { solveForegroundSpec, solveBorderAlpha } from './chunk-7LUK7J7M.js';

// src/lib/generator.ts
function toHighContrast(config) {
  return {
    ...config,
    anchors: {
      ...config.anchors,
      keyColors: {},
      // Force grayscale
      page: {
        ...config.anchors.page,
        light: {
          ...config.anchors.page.light,
          start: { background: 1, adjustable: false },
          end: { background: 0, adjustable: false }
        },
        dark: {
          ...config.anchors.page.dark,
          start: { background: 0, adjustable: false },
          end: { background: 1, adjustable: false }
        }
      },
      inverted: {
        ...config.anchors.inverted,
        light: {
          ...config.anchors.inverted.light,
          start: { background: 0, adjustable: false },
          end: { background: 1, adjustable: false }
        },
        dark: {
          ...config.anchors.inverted.dark,
          start: { background: 1, adjustable: false },
          end: { background: 0, adjustable: false }
        }
      }
    }
  };
}
function generateTokensCss(groups, backgrounds, borderTargets, selector, palette) {
  const rootLines = [];
  const propertyLines = [];
  rootLines.push("/* AUTO-GENERATED by src/lib/generator.ts */");
  const toNumber = (n) => parseFloat(n.toFixed(4));
  const rootSelector = selector || ":root";
  rootLines.push(`${rootSelector} {`);
  rootLines.push(`  /* Elevation */`);
  rootLines.push(
    `  --shadow-sm: 0 1px 2px 0 light-dark(oklch(0 0 0 / 0.05), oklch(1 0 0 / 0.15));`
  );
  rootLines.push(`  --shadow-md: 
    0 4px 6px -1px light-dark(oklch(0 0 0 / 0.1), oklch(1 0 0 / 0.15)), 
    0 2px 4px -1px light-dark(oklch(0 0 0 / 0.06), oklch(1 0 0 / 0.1));`);
  rootLines.push(`  --shadow-lg: 
    0 10px 15px -3px light-dark(oklch(0 0 0 / 0.1), oklch(1 0 0 / 0.15)), 
    0 4px 6px -2px light-dark(oklch(0 0 0 / 0.05), oklch(1 0 0 / 0.1));`);
  rootLines.push(`  --shadow-xl: 
    0 20px 25px -5px light-dark(oklch(0 0 0 / 0.1), oklch(1 0 0 / 0.15)), 
    0 10px 10px -5px light-dark(oklch(0 0 0 / 0.04), oklch(1 0 0 / 0.1));`);
  rootLines.push(`  /* Focus */`);
  rootLines.push(`  --focus-ring-color: light-dark(
    oklch(0.45 0.2 var(--hue-brand, 250)),
    oklch(0.75 0.2 var(--hue-brand, 250))
  );`);
  if (palette && palette.hues) {
    rootLines.push(`  /* Data Visualization */`);
    const targetChroma = palette.targetChroma ?? 0.12;
    const pageBg = backgrounds.get("page") ?? {
      light: { l: 1},
      dark: { l: 0}
    };
    palette.hues.forEach((hue, index) => {
      const lightSpec = solveForegroundSpec(pageBg.light.l);
      const lightL = lightSpec["fg-strong"];
      const darkSpec = solveForegroundSpec(pageBg.dark.l);
      const darkL = darkSpec["fg-strong"];
      rootLines.push(
        `  --chart-${index + 1}: light-dark(
    oklch(${toNumber(lightL)} ${toNumber(targetChroma)} ${toNumber(hue)}),
    oklch(${toNumber(darkL)} ${toNumber(targetChroma)} ${toNumber(hue)})
  );`
      );
    });
  }
  rootLines.push(`}`);
  rootLines.push("");
  for (const group of groups) {
    for (const surface of group.surfaces) {
      const bgLight = backgrounds.get(surface.slug)?.light ?? {
        l: 0,
        c: 0,
        h: 0
      };
      const bgDark = backgrounds.get(surface.slug)?.dark ?? {
        l: 0,
        c: 0,
        h: 0
      };
      const lightSpec = solveForegroundSpec(bgLight.l);
      const darkSpec = solveForegroundSpec(bgDark.l);
      const prefix = selector ? `${selector} ` : "";
      rootLines.push(`${prefix}.surface-${surface.slug} {`);
      rootLines.push(
        `  --surface-token: light-dark(
    oklch(${toNumber(bgLight.l)} ${toNumber(bgLight.c)} ${toNumber(bgLight.h)}),
    oklch(${toNumber(bgDark.l)} ${toNumber(bgDark.c)} ${toNumber(bgDark.h)})
  );`
      );
      rootLines.push(
        `  --text-high-token: light-dark(
    oklch(${toNumber(lightSpec["fg-high"])} 0 0),
    oklch(${toNumber(darkSpec["fg-high"])} 0 0)
  );`
      );
      rootLines.push(
        `  --text-subtle-token: light-dark(
    oklch(${toNumber(lightSpec["fg-subtle"])} 0 0),
    oklch(${toNumber(darkSpec["fg-subtle"])} 0 0)
  );`
      );
      rootLines.push(
        `  --text-subtlest-token: light-dark(
    oklch(${toNumber(lightSpec["fg-subtlest"])} 0 0),
    oklch(${toNumber(darkSpec["fg-subtlest"])} 0 0)
  );`
      );
      if (borderTargets) {
        const solveBorder = (bgL, textL, target) => solveBorderAlpha(bgL, textL, target);
        const lightDec = solveBorder(
          bgLight.l,
          lightSpec["fg-strong"],
          borderTargets.decorative
        );
        const darkDec = solveBorder(
          bgDark.l,
          darkSpec["fg-strong"],
          borderTargets.decorative
        );
        const lightInt = solveBorder(
          bgLight.l,
          lightSpec["fg-strong"],
          borderTargets.interactive
        );
        const darkInt = solveBorder(
          bgDark.l,
          darkSpec["fg-strong"],
          borderTargets.interactive
        );
        const lightBorderL = lightSpec["fg-strong"];
        const darkBorderL = darkSpec["fg-strong"];
        rootLines.push(
          `  --border-dec-token: light-dark(
    oklch(${toNumber(lightBorderL)} 0 0 / ${toNumber(lightDec)}),
    oklch(${toNumber(darkBorderL)} 0 0 / ${toNumber(darkDec)})
  );`
        );
        rootLines.push(
          `  --border-int-token: light-dark(
    oklch(${toNumber(lightBorderL)} 0 0 / ${toNumber(lightInt)}),
    oklch(${toNumber(darkBorderL)} 0 0 / ${toNumber(darkInt)})
  );`
        );
      }
      rootLines.push(`}`);
      if (surface.states) {
        surface.states.forEach((state) => {
          const stateSlug = `${surface.slug}-${state.name}`;
          const bgState = backgrounds.get(stateSlug);
          if (bgState) {
            const stateSelector = state.name === "hover" || state.name === "active" ? `.surface-${surface.slug}:${state.name}` : `.surface-${surface.slug}-${state.name}`;
            rootLines.push(`${prefix}${stateSelector} {`);
            rootLines.push(
              `  --surface-token: light-dark(
    oklch(${toNumber(bgState.light.l)} ${toNumber(bgState.light.c)} ${toNumber(
                bgState.light.h
              )}),
    oklch(${toNumber(bgState.dark.l)} ${toNumber(bgState.dark.c)} ${toNumber(
                bgState.dark.h
              )})
  );`
            );
            rootLines.push(`}`);
          }
        });
      }
      rootLines.push("");
    }
  }
  return [...propertyLines, "", ...rootLines].join("\n");
}

export { generateTokensCss, toHighContrast };
//# sourceMappingURL=chunk-BHESPRR4.js.map
//# sourceMappingURL=chunk-BHESPRR4.js.map