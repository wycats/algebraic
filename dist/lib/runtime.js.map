{"version":3,"sources":["../../src/lib/runtime.ts"],"names":[],"mappings":";;;;;;;;;;;AAgBO,SAAS,aAAA,CAAc,QAAsB,QAAA,EAA2B;AAC7E,EAAA,MAAM,KAAA,GAAQ,MAAM,MAAM,CAAA;AAC1B,EAAA,MAAM,KAAA,GAAQ,gBAAA,CAAiB,MAAA,CAAO,OAAA,CAAQ,SAAS,CAAA;AAEvD,EAAA,IAAI,MAAM,iBAAA,CAAkB,MAAA,CAAO,MAAA,EAAQ,KAAA,EAAO,OAAO,aAAA,EAAe;AAAA,IACtE;AAAA,GACD,CAAA;AAGD,EAAA,IAAI,KAAA,CAAM,MAAA,KAAW,MAAA,IAAa,KAAA,CAAM,QAAQ,MAAA,EAAW;AACzD,IAAA,MAAM,OAAiB,EAAC;AACxB,IAAA,IAAI,MAAM,MAAA,KAAW,MAAA;AACnB,MAAA,IAAA,CAAK,IAAA,CAAK,CAAA,kBAAA,EAAqB,KAAA,CAAM,MAAM,CAAA,CAAA,CAAG,CAAA;AAChD,IAAA,IAAI,KAAA,CAAM,QAAQ,MAAA,EAAW,IAAA,CAAK,KAAK,CAAA,eAAA,EAAkB,KAAA,CAAM,GAAG,CAAA,CAAA,CAAG,CAAA;AAErE,IAAA,IAAI,IAAA,CAAK,SAAS,CAAA,EAAG;AACnB,MAAA,MAAM,QAAQ,QAAA,IAAY,OAAA;AAC1B,MAAA,GAAA,GAAM,GAAG,KAAK,CAAA;AAAA,EAAO,IAAA,CAAK,IAAA,CAAK,IAAI,CAAC;AAAA;;AAAA,CAAA,GAAY,GAAA;AAAA,IAClD;AAAA,EACF;AAEA,EAAA,OAAO,GAAA;AACT;AASO,SAAS,WAAA,CACd,GAAA,EACA,MAAA,EACA,eAAA,EACkB;AAClB,EAAA,MAAM,KAAA,GAAQ,eAAA,IAAmB,QAAA,CAAS,aAAA,CAAc,OAAO,CAAA;AAC/D,EAAA,KAAA,CAAM,WAAA,GAAc,GAAA;AAEpB,EAAA,IAAI,CAAC,eAAA,EAAiB;AACpB,IAAA,IAAI,MAAA,EAAQ;AACV,MAAA,MAAA,CAAO,YAAY,KAAK,CAAA;AAAA,IAC1B,CAAA,MAAO;AACL,MAAA,QAAA,CAAS,IAAA,CAAK,YAAY,KAAK,CAAA;AAAA,IACjC;AAAA,EACF;AAEA,EAAA,OAAO,KAAA;AACT","file":"runtime.js","sourcesContent":["import { generateTokensCss } from \"./generator.ts\";\nimport { getKeyColorStats, solve } from \"./index.ts\";\nimport type { SolverConfig } from \"./types.ts\";\n\nexport { toHighContrast } from \"./generator.ts\";\n\n/**\n * Generates a CSS theme string from a SolverConfig.\n * This runs the full solver engine and token generator.\n *\n * It also extracts the average Chroma and Hue from the key colors\n * and sets them as --chroma-brand and --hue-brand.\n *\n * @param config The solver configuration\n * @param selector Optional CSS selector to scope the rules to (e.g. \"#my-app\")\n */\nexport function generateTheme(config: SolverConfig, selector?: string): string {\n  const theme = solve(config);\n  const stats = getKeyColorStats(config.anchors.keyColors);\n\n  let css = generateTokensCss(config.groups, theme, config.borderTargets, {\n    selector,\n  });\n\n  // Prepend variables if key colors exist\n  if (stats.chroma !== undefined || stats.hue !== undefined) {\n    const vars: string[] = [];\n    if (stats.chroma !== undefined)\n      vars.push(`  --chroma-brand: ${stats.chroma};`);\n    if (stats.hue !== undefined) vars.push(`  --hue-brand: ${stats.hue};`);\n\n    if (vars.length > 0) {\n      const scope = selector || \":root\";\n      css = `${scope} {\\n${vars.join(\"\\n\")}\\n}\\n\\n` + css;\n    }\n  }\n\n  return css;\n}\n\n/**\n * Injects a CSS string into the DOM.\n * If target is provided, appends to that element (e.g. ShadowRoot).\n * Otherwise, appends to document.head.\n *\n * If existingElement is provided, it updates that element instead of creating a new one.\n */\nexport function injectTheme(\n  css: string,\n  target?: HTMLElement | ShadowRoot,\n  existingElement?: HTMLStyleElement\n): HTMLStyleElement {\n  const style = existingElement || document.createElement(\"style\");\n  style.textContent = css;\n\n  if (!existingElement) {\n    if (target) {\n      target.appendChild(style);\n    } else {\n      document.head.appendChild(style);\n    }\n  }\n\n  return style;\n}\n"]}