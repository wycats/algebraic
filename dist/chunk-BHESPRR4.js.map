{"version":3,"sources":["../src/lib/generator.ts"],"names":[],"mappings":"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","file":"chunk-BHESPRR4.js","sourcesContent":["import { solveBorderAlpha, solveForegroundSpec } from \"./math.ts\";\nimport type {\n  BorderTargets,\n  ColorSpec,\n  Mode,\n  PaletteConfig,\n  SolverConfig,\n  SurfaceGroup,\n} from \"./types.ts\";\n\nexport function toHighContrast(config: SolverConfig): SolverConfig {\n  return {\n    ...config,\n    anchors: {\n      ...config.anchors,\n      keyColors: {}, // Force grayscale\n      page: {\n        ...config.anchors.page,\n        light: {\n          ...config.anchors.page.light,\n          start: { background: 1.0, adjustable: false },\n          end: { background: 0.0, adjustable: false },\n        },\n        dark: {\n          ...config.anchors.page.dark,\n          start: { background: 0.0, adjustable: false },\n          end: { background: 1.0, adjustable: false },\n        },\n      },\n      inverted: {\n        ...config.anchors.inverted,\n        light: {\n          ...config.anchors.inverted.light,\n          start: { background: 0.0, adjustable: false },\n          end: { background: 1.0, adjustable: false },\n        },\n        dark: {\n          ...config.anchors.inverted.dark,\n          start: { background: 1.0, adjustable: false },\n          end: { background: 0.0, adjustable: false },\n        },\n      },\n    },\n  };\n}\n\nexport function generateTokensCss(\n  groups: SurfaceGroup[],\n  backgrounds: Map<string, Record<Mode, ColorSpec>>,\n  borderTargets?: BorderTargets,\n  selector?: string,\n  palette?: PaletteConfig\n): string {\n  const rootLines: string[] = [];\n  const propertyLines: string[] = [];\n\n  rootLines.push(\"/* AUTO-GENERATED by src/lib/generator.ts */\");\n\n  // Note: We assume @property definitions are loaded via engine.css\n  // Re-declaring them here causes transition glitches in some browsers\n  // when the stylesheet is updated dynamically.\n\n  const toNumber = (n: number): number => parseFloat(n.toFixed(4));\n\n  // --- Primitives (Shadows & Focus) ---\n  const rootSelector = selector || \":root\";\n  rootLines.push(`${rootSelector} {`);\n\n  // Shadows\n  rootLines.push(`  /* Elevation */`);\n  // In Dark Mode, black shadows are often invisible on dark backgrounds.\n  // We use a white \"glow\" (diffuse light) to simulate elevation.\n  rootLines.push(\n    `  --shadow-sm: 0 1px 2px 0 light-dark(oklch(0 0 0 / 0.05), oklch(1 0 0 / 0.15));`\n  );\n\n  rootLines.push(`  --shadow-md: \n    0 4px 6px -1px light-dark(oklch(0 0 0 / 0.1), oklch(1 0 0 / 0.15)), \n    0 2px 4px -1px light-dark(oklch(0 0 0 / 0.06), oklch(1 0 0 / 0.1));`);\n\n  rootLines.push(`  --shadow-lg: \n    0 10px 15px -3px light-dark(oklch(0 0 0 / 0.1), oklch(1 0 0 / 0.15)), \n    0 4px 6px -2px light-dark(oklch(0 0 0 / 0.05), oklch(1 0 0 / 0.1));`);\n\n  rootLines.push(`  --shadow-xl: \n    0 20px 25px -5px light-dark(oklch(0 0 0 / 0.1), oklch(1 0 0 / 0.15)), \n    0 10px 10px -5px light-dark(oklch(0 0 0 / 0.04), oklch(1 0 0 / 0.1));`);\n\n  // Focus\n  rootLines.push(`  /* Focus */`);\n  rootLines.push(`  --focus-ring-color: light-dark(\n    oklch(0.45 0.2 var(--hue-brand, 250)),\n    oklch(0.75 0.2 var(--hue-brand, 250))\n  );`);\n\n  // Data Visualization Palette\n  if (palette && palette.hues) {\n    rootLines.push(`  /* Data Visualization */`);\n    const targetChroma = palette.targetChroma ?? 0.12;\n    \n    // We need to solve for lightness against the page background.\n    // Since we don't have the full config here, we rely on the 'page' surface being present in the map.\n    const pageBg = backgrounds.get(\"page\") ?? {\n      light: { l: 1, c: 0, h: 0 },\n      dark: { l: 0, c: 0, h: 0 },\n    };\n\n    palette.hues.forEach((hue, index) => {\n      // Solve for Light Mode\n      // We want a color that is visible against the light page background.\n      // Usually this means a darker color (like text).\n      // We use 'fg-strong' logic (APCA ~105).\n      const lightSpec = solveForegroundSpec(pageBg.light.l);\n      const lightL = lightSpec[\"fg-strong\"];\n\n      // Solve for Dark Mode\n      // We want a color that is visible against the dark page background.\n      // Usually this means a lighter color.\n      const darkSpec = solveForegroundSpec(pageBg.dark.l);\n      const darkL = darkSpec[\"fg-strong\"];\n\n      rootLines.push(\n        `  --chart-${index + 1}: light-dark(\n    oklch(${toNumber(lightL)} ${toNumber(targetChroma)} ${toNumber(hue)}),\n    oklch(${toNumber(darkL)} ${toNumber(targetChroma)} ${toNumber(hue)})\n  );`\n      );\n    });\n  }\n\n  rootLines.push(`}`);\n  rootLines.push(\"\");\n\n  for (const group of groups) {\n    for (const surface of group.surfaces) {\n      const bgLight = backgrounds.get(surface.slug)?.light ?? {\n        l: 0,\n        c: 0,\n        h: 0,\n      };\n      const bgDark = backgrounds.get(surface.slug)?.dark ?? {\n        l: 0,\n        c: 0,\n        h: 0,\n      };\n\n      const lightSpec = solveForegroundSpec(bgLight.l);\n      const darkSpec = solveForegroundSpec(bgDark.l);\n\n      // Hue shift is already applied in solve()\n\n      // Generate the Class Definition\n      const prefix = selector ? `${selector} ` : \"\";\n      rootLines.push(`${prefix}.surface-${surface.slug} {`);\n\n      // 1. Surface Token\n      rootLines.push(\n        `  --surface-token: light-dark(\n    oklch(${toNumber(bgLight.l)} ${toNumber(bgLight.c)} ${toNumber(bgLight.h)}),\n    oklch(${toNumber(bgDark.l)} ${toNumber(bgDark.c)} ${toNumber(bgDark.h)})\n  );`\n      );\n\n      // 2. Text Tokens\n      rootLines.push(\n        `  --text-high-token: light-dark(\n    oklch(${toNumber(lightSpec[\"fg-high\"])} 0 0),\n    oklch(${toNumber(darkSpec[\"fg-high\"])} 0 0)\n  );`\n      );\n\n      rootLines.push(\n        `  --text-subtle-token: light-dark(\n    oklch(${toNumber(lightSpec[\"fg-subtle\"])} 0 0),\n    oklch(${toNumber(darkSpec[\"fg-subtle\"])} 0 0)\n  );`\n      );\n\n      rootLines.push(\n        `  --text-subtlest-token: light-dark(\n    oklch(${toNumber(lightSpec[\"fg-subtlest\"])} 0 0),\n    oklch(${toNumber(darkSpec[\"fg-subtlest\"])} 0 0)\n  );`\n      );\n\n      // 3. Border Tokens\n      if (borderTargets) {\n        const solveBorder = (\n          bgL: number,\n          textL: number,\n          target: number\n        ): number => solveBorderAlpha(bgL, textL, target);\n\n        const lightDec = solveBorder(\n          bgLight.l,\n          lightSpec[\"fg-strong\"],\n          borderTargets.decorative\n        );\n        const darkDec = solveBorder(\n          bgDark.l,\n          darkSpec[\"fg-strong\"],\n          borderTargets.decorative\n        );\n        const lightInt = solveBorder(\n          bgLight.l,\n          lightSpec[\"fg-strong\"],\n          borderTargets.interactive\n        );\n        const darkInt = solveBorder(\n          bgDark.l,\n          darkSpec[\"fg-strong\"],\n          borderTargets.interactive\n        );\n\n        const lightBorderL = lightSpec[\"fg-strong\"];\n        const darkBorderL = darkSpec[\"fg-strong\"];\n\n        rootLines.push(\n          `  --border-dec-token: light-dark(\n    oklch(${toNumber(lightBorderL)} 0 0 / ${toNumber(lightDec)}),\n    oklch(${toNumber(darkBorderL)} 0 0 / ${toNumber(darkDec)})\n  );`\n        );\n\n        rootLines.push(\n          `  --border-int-token: light-dark(\n    oklch(${toNumber(lightBorderL)} 0 0 / ${toNumber(lightInt)}),\n    oklch(${toNumber(darkBorderL)} 0 0 / ${toNumber(darkInt)})\n  );`\n        );\n      }\n\n      rootLines.push(`}`); // End class\n\n      // States (Hover/Active)\n      if (surface.states) {\n        surface.states.forEach((state) => {\n          const stateSlug = `${surface.slug}-${state.name}`;\n          const bgState = backgrounds.get(stateSlug);\n\n          if (bgState) {\n            // We generate a modifier class? Or pseudo-class?\n            // The config says \"states: [{name: 'hover'}]\".\n            // Usually this maps to `.surface-card:hover`.\n            // But sometimes it might be a class `.surface-card-selected`.\n            // Let's assume pseudo-classes for standard names, and classes for others?\n            // The original code generated `--surface-card-hover-token`.\n            // And `utilities.css` mapped `.surface-card:hover` to that token.\n\n            // Here we can generate:\n            // .surface-card:hover { --surface-token: ... }\n\n            const stateSelector =\n              state.name === \"hover\" || state.name === \"active\"\n                ? `.surface-${surface.slug}:${state.name}`\n                : `.surface-${surface.slug}-${state.name}`; // e.g. .surface-card-selected\n\n            rootLines.push(`${prefix}${stateSelector} {`);\n            rootLines.push(\n              `  --surface-token: light-dark(\n    oklch(${toNumber(bgState.light.l)} ${toNumber(bgState.light.c)} ${toNumber(\n                bgState.light.h\n              )}),\n    oklch(${toNumber(bgState.dark.l)} ${toNumber(bgState.dark.c)} ${toNumber(\n                bgState.dark.h\n              )})\n  );`\n            );\n            rootLines.push(`}`);\n          }\n        });\n      }\n      rootLines.push(\"\");\n    }\n  }\n\n  return [...propertyLines, \"\", ...rootLines].join(\"\\n\");\n}\n"]}