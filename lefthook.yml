pre-commit:
  parallel: true
  commands:
    sync-lockfile:
      run: pnpm install && git add pnpm-lock.yaml
    format:
      glob: "*.{ts,js,json,md,yml,css,svelte,astro}"
      run: pnpm format {staged_files} && git add {staged_files}
    lint:
      glob: "*.{ts,js,svelte,astro}"
      run: pnpm eslint {staged_files}
    security:
      glob: "*"
      run: pnpm lint:security {staged_files}
    tokens:
      glob: "site/src/components/builder-v2/**/*"
      run: pnpm lint:tokens
    knip:
      run: pnpm knip
    test:
      run: pnpm -r test

pre-push:
  parallel: false
  commands:
    typecheck:
      run: tsc --noEmit
    site-check:
      run: pnpm --filter site astro check
    build:
      run: pnpm build
    publint:
      run: pnpm check:exports
    lint-all:
      run: pnpm lint
    security-all:
      run: pnpm lint:security
