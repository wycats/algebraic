# System Goals & Implementation Constraints

> **Purpose:** This document serves as the "Constitution" for the Color System project. It maps high-level goals to concrete implementation constraints.
> **Usage:** Agents should review this file at the start of every session to ensure alignment with the core philosophy.

## 0. System Intuition: The Elevator Pitch

**For the developer who struggles with color:**

> "Stop fighting with hex codes. Stop worrying if that gray is accessible on that background. Stop manually creating dark mode overrides."

**How to use this system:**

1.  **Pick a Surface Role (The Taxonomy):**

    - **The Canvas (Foundations):**
      - `surface-page`: The infinite backdrop.
      - `surface-workspace`: A slightly elevated area for the main work.
    - **The Objects (Containers):**
      - `surface-card`: A distinct, contained element. It has boundaries. It holds content.
      - `surface-tinted`: A subtle variation for grouping related items.
    - **The Interactors (Actions):**
      - `surface-action`: Something you click. It wants to be touched.
    - **The Spotlights (Attention):**
      - `surface-spotlight`: Dark, inverted, high contrast. For toasts, tooltips, or major callouts.
      - `surface-soft-spotlight`: A softer version of the spotlight.

2.  **Pick a Text Role:**

    - `text-high`: Primary content.
    - `text-subtle`: Secondary metadata.
    - `text-subtler`: Tertiary details.

3.  **:boom: It Just Works.**

**The Magic:**

- The system **automatically** calculates the perfect contrast for that text on that surface.
- If you switch to Dark Mode, it **automatically** inverts and re-balances (not just a dumb swap, but a re-calculation).
- If you change the brand color, the entire app **automatically** harmonizes.

**Focus on the structure. Let the system handle the color.**

---

## 1. System-Native Authenticity

**Goal:** The demo environment must accurately reflect the capabilities of the production system. We must not "fake" features for the sake of a demo.
**Why:** To ensure that the demo serves as a valid proof-of-concept for the architecture. If the system can't do it natively, the system needs to change, not the demo.

**Implementation Constraints:**

- [ ] **DO NOT** use inline styles (`style={{ ... }}`) to mimic token behavior.
- [ ] **DO NOT** create "demo-only" CSS classes that bypass the solver.
- [ ] **MUST** use the actual `surface-*` and `text-*` classes generated by the solver.
- [ ] **MUST** refactor the core solver if a new visual requirement arises, rather than hacking the UI.

## 2. Terminology Precision

**Goal:** Developer tools must educate the user on the actual system API.
**Why:** Abstractions hide the system's mechanics, hindering learning. Users (developers) need to learn the vocabulary of the system.

**Implementation Constraints:**

- [ ] **DO NOT** use abstract labels like "Raised" or "Sunken" in UI.
- [ ] **MUST** use exact token names: `workspace`, `page`, `card`, `spotlight`.
- [ ] **MUST** match UI labels 1:1 with the underlying CSS class names or token IDs.

## 3. Single Source of Truth for Theme

**Goal:** The theme state must be global and managed by the browser's native capabilities where possible.
**Why:** To prevent synchronization bugs and ensure consistent behavior across the app.

**Implementation Constraints:**

- [ ] **DO NOT** implement local "dark mode" toggles on components.
- [ ] **MUST** rely on `color-scheme` and CSS `light-dark()` functions.
- [ ] **MUST** ensure all components respond automatically to the global theme context.

## 4. Isomorphic Solver Logic

**Goal:** The color generation logic must be portable between build-time (Node) and run-time (Browser).
**Why:** To enable powerful client-side tooling (like the "Live Solver") without duplicating logic.

**Implementation Constraints:**

- [ ] **DO NOT** import Node.js specific modules (fs, path) in core solver logic (`solver-engine.ts`, `math.ts`).
- [ ] **MUST** keep the core engine pure and dependency-free (except for math libs).
- [ ] **MUST** separate CLI/IO concerns into distinct files (e.g., `generate-tokens.ts`).

## 5. "Experience Lab" Narrative

**Goal:** Demos should target emotional states, not just technical features.
**Why:** To connect with the user on a human level and demonstrate the "feeling" of the system.

**Implementation Constraints:**

- [ ] **MUST** frame demos around user intent (e.g., "I feel understood", "I feel safe").
- [ ] **MUST** prioritize interaction design and micro-animations to enhance the emotional connection.
