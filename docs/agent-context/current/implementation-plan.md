# Implementation Plan - Epoch 5: Phase 2 - Accessibility & High Contrast

## Goal
Ensure the Color System behaves correctly in high contrast modes (Windows High Contrast / Forced Colors) and respects user preferences for increased contrast (`prefers-contrast: more`), while also providing graceful degradation for print media.

## Proposed Scope

### 1. Forced Colors (Windows High Contrast)
- **Verification**: Verify that the "Variable Swap" strategy (mapping semantic roles to System Colors) works as expected in a simulated Forced Colors environment.
- **Refinement**: Adjust mappings if necessary to ensure all interactive states (hover, focus, active) are distinct and visible.
- **Documentation**: Add a specific guide or section on how to test and verify Forced Colors support.

### 2. Prefers Contrast (`prefers-contrast: more`)
- **Strategy**: **Build-time Algorithmic Enhancement**.
  - Instead of solving at runtime, we will generate a "High Contrast" version of the theme during the build process (`pnpm solve`).
  - This variant will be generated by programmatically:
    - Widening the anchors (e.g., pushing them to 0% and 100% lightness) to maximize contrast.
    - **Reducing text chroma to 0** to ensure maximum legibility and sharpness.
  - The resulting CSS variables will be wrapped in a `@media (prefers-contrast: more)` block and appended to `theme.css`.
- **Implementation**:
  - Create a `toHighContrast(config)` utility in `src/lib/generator.ts`.
  - Update the CLI/Generator to output the media query block.

### 3. Print Styles
- **Goal**: Ensure content is legible when printed.
- **Implementation**:
  - Force a "light" context for printing (save ink).
  - Remove background colors from non-essential surfaces?
  - Ensure text is black/dark gray.
  - Hide interactive elements (buttons, navs) if irrelevant for print.

## Questions for User
1. For `prefers-contrast: more`, do we want to automatically switch to a specific "High Contrast" preset, or try to algorithmically enhance the current theme?
2. Are there any specific "System Colors" we missed in the previous phase that need attention?
