/*
   BASELINE 2025: UTILITIES
   Configuration Providers.
*/

/* --- SURFACES --- */
/* Surface definitions are now auto-generated in generated-tokens.css */

/* --- SEMANTIC HUES --- */

.hue-success {
  --context-hue: var(--axm-hue-success);
  --context-chroma: var(--axm-chroma-success);

  --base-hue: var(--context-hue);
  --hue-adjust: 0;
  /* Apply a subtle tint to the surface background */
  --base-chroma: calc(var(--context-chroma) * 0.1);

  --default-fg-hue: var(--axm-hue-success);
  --override-fg-chroma: var(--axm-chroma-success);
}

.hue-warning {
  --context-hue: var(--axm-hue-warning);
  --context-chroma: var(--axm-chroma-warning);

  --base-hue: var(--context-hue);
  --hue-adjust: 0;
  /* Apply a subtle tint to the surface background */
  --base-chroma: calc(var(--context-chroma) * 0.1);

  --default-fg-hue: var(--axm-hue-warning);
  --override-fg-chroma: var(--axm-chroma-warning);
}

.hue-error {
  --context-hue: var(--axm-hue-error);
  --context-chroma: var(--axm-chroma-error);

  --base-hue: var(--context-hue);
  --hue-adjust: 0;
  /* Apply a subtle tint to the surface background */
  --base-chroma: calc(var(--context-chroma) * 0.1);

  --default-fg-hue: var(--axm-hue-error);
  --override-fg-chroma: var(--axm-chroma-error);
}

/* --- BORDERS --- */

.bordered {
  /* Default to decorative border from context */
  --computed-border-color: var(--computed-border-dec-color);
}

.border-interactive {
  /* Override for interactive borders from context */
  --computed-border-color: var(--computed-border-int-color);
}

/* --- MODIFIERS --- */

/* Elevation */
.shadow-sm {
  box-shadow: var(--axm-shadow-sm);
}
.shadow-md {
  box-shadow: var(--axm-shadow-md);
}
.shadow-lg {
  box-shadow: var(--axm-shadow-lg);
}
.shadow-xl {
  box-shadow: var(--axm-shadow-xl);
}

/* Focus */
.focus-ring:focus-visible {
  outline: 2px solid var(--axm-focus-ring-color);
  outline-offset: 2px;
}

/* Hue Adjustments */
.hue-brand {
  --base-hue: var(--axm-hue-brand);
  --hue-adjust: 0;
  /* Apply a subtle tint to the surface background */
  --base-chroma: calc(var(--axm-chroma-brand) * 0.1);

  --default-fg-hue: var(--axm-hue-brand);
  --override-fg-chroma: var(--axm-chroma-brand);
}

.hue-blue {
  --base-hue: var(--axm-hue-blue);
  --hue-adjust: 0;
  /* Apply a subtle tint to the surface background */
  --base-chroma: calc(var(--axm-chroma-blue) * 0.1);

  --default-fg-hue: var(--axm-hue-blue);
  --override-fg-chroma: var(--axm-chroma-blue);
}

/* Text Lightness Overrides */
.text-strong {
  /* No-op, resets to default for the surface */
}

.text-subtle {
  /* Apply computed chroma/hue to the subtle token */
  color: oklch(
    from var(--axm-text-subtle-token) l var(--computed-fg-C)
      var(--computed-fg-H)
  );
}

.text-subtler {
  /* Apply computed chroma/hue to the subtlest token */
  color: oklch(
    from var(--axm-text-subtlest-token) l var(--computed-fg-C)
      var(--computed-fg-H)
  );
}

.text-link {
  /* Links use the brand hue by default */
  color: oklch(from var(--computed-fg-color) l c var(--axm-hue-brand));
  text-decoration: underline;
  cursor: pointer;
}

/* --- STATES --- */

.state-disabled,
[disabled] {
  opacity: 0.5;
  pointer-events: none;
  /* Desaturate */
  filter: grayscale(1);
}

.state-selected,
[aria-selected="true"] {
  /* Selected state uses brand background */
  background-color: oklch(
    from var(--computed-surface) l c var(--axm-hue-brand)
  );
  /* Ensure text contrast on brand background might need adjustment, 
     but for now let's assume the lightness shift is handled by the surface logic 
     if we were to make this a full surface. 
     Since it's a modifier, we might need a specific token. 
     For Phase 1, let's keep it simple: Brand Border + Background Tint */
  border-color: oklch(from var(--computed-fg-color) l c var(--axm-hue-brand));
  background-color: oklch(
    from var(--computed-surface) l 0.05 var(--axm-hue-brand)
  );
}

/* Surface Adjustments */
.surface-vibrant {
  --surface-chroma-adjust: 0.02;
}

.surface-glass {
  backdrop-filter: blur(10px);
  background-color: oklch(from var(--computed-surface) l c h / 0.7) !important;
}

.hue-monochrome {
  --base-chroma: 0;
}

/* Content Overrides */
.fg-vibrant {
  --override-fg-chroma: 0.15;
}

/* --- SURFACE SPECIFIC OVERRIDES --- */

/* 
   Action Surfaces (Primary Buttons)
   When a hue is applied to an action surface, we want it to be "filled" (vibrant),
   not just tinted.
*/
.surface-action.hue-brand {
  --base-chroma: var(--axm-chroma-brand);
  /* Ensure text is white/light on dark brand background */
  --override-fg-chroma: 0;
}

.surface-action.hue-success {
  --base-chroma: var(--axm-chroma-success);
  --override-fg-chroma: 0;
}

.surface-action.hue-warning {
  --base-chroma: var(--axm-chroma-warning);
  --override-fg-chroma: 0;
}

.surface-action.hue-error {
  --base-chroma: var(--axm-chroma-error);
  --override-fg-chroma: 0;
}

.surface-action.hue-blue {
  --base-chroma: var(--axm-chroma-blue);
  --override-fg-chroma: 0;
}

.surface-action.hue-highlight {
  --base-chroma: var(--axm-chroma-highlight);
  --override-fg-chroma: 0;
}

/* --- KEY COLOR UTILITIES --- */

.text-error {
  color: var(--axm-key-error-color);
}
.text-warning {
  color: var(--axm-key-warning-color);
}
.text-success {
  color: var(--axm-key-success-color);
}

.bg-error {
  background-color: var(--axm-key-error-color);
}
.bg-warning {
  background-color: var(--axm-key-warning-color);
}
.bg-success {
  background-color: var(--axm-key-success-color);
}

.stroke-error {
  stroke: var(--axm-key-error-color);
}
.stroke-warning {
  stroke: var(--axm-key-warning-color);
}
.stroke-success {
  stroke: var(--axm-key-success-color);
}

.hover-text-error:hover {
  color: var(--axm-key-error-color);
}
